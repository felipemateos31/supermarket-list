<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref='/'></ion-back-button>
    </ion-buttons>
    <ion-title>
      {{ list.titleList }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list>
    <ion-list-header *ngIf="list.items.length > 0">
      <ion-label>Articulos</ion-label>
    </ion-list-header>

    <div [formGroup]="itemsForm">
      <ng-container formArrayName="items" *ngFor="let item of items.controls; let i = index;">
        <ion-item-sliding class="animated fadeInDown">
          <div [formGroupName]="i">
            <ion-item>
              <ion-checkbox slot="end" [id]="'complete-'+i" formControlName="complete"
                (ionChange)="onCompleteChange(item.value)">
              </ion-checkbox>
              <ion-grid>
                <ion-row>
                  <ion-col size="12">
                    <ion-label>
                      <div class="list-articles">
                        <h3 class="list-header"> {{ item.get('description').value }} </h3>
                      </div>
                    </ion-label>
                  </ion-col>
                  <ion-col>
                    <ion-item [id]="'quantity-'+i">
                      <ion-label position="stacked">Cantidad</ion-label>
                      <ion-input type="number" [id]="'quantity-'+i" formControlName="quantity"
                        [disabled]="item.get('complete').value"></ion-input>
                    </ion-item>
                  </ion-col>
                  <ion-col>
                    <ion-item [id]="'quantity-'+i">
                      <ion-label position="stacked">Precio</ion-label>
                      <ion-input type="number" [id]="'price-'+i" formControlName="price"
                        [disabled]="item.get('complete').value"></ion-input>
                    </ion-item>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-item>

            <ion-item-options side="end">
              <ion-item-option (click)="deleteItem(i, item.value)" color="danger">
                <ion-icon slot="icon-only" name="close"></ion-icon>
              </ion-item-option>
            </ion-item-options>
          </div>
        </ion-item-sliding>
      </ng-container>
    </div>
  </ion-list>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-button shape="round" size="small" (click)="addItem()">
      <ion-icon slot="start" name="add"></ion-icon>
      Nuevo articulo
    </ion-button>
  </ion-fab>
</ion-content>